%%
% feature tracking algorithm
%% params
regionsize = 15;

%% Harris Corner Detection

%%% person_toy image loading
files = dir('**/person_toy/*.jpg');
tracking_video = VideoWriter('person_toy.avi');
tracking_video.FrameRate = 10;
open(tracking_video);
for i = 1:(length(files) - 1)
   filename1 = char(strcat(files(i).folder,'/',files(i).name));
   filename2 = char(strcat(files(i+1).folder,'/',files(i+1).name));
   im1 = imread(filename1);
   im1 = rgb2gray(im1);
   im2 = imread(filename2);
   im2 = rgb2gray(im2);
   [H, r, c] = harris_corner_detection(filename1);
   V = LK(im1, im2, regionsize, r, c);
   frame = getframe(gcf);
   writeVideo(tracking_video,frame)
end

close(tracking_video);

%%% pingpong image loading
files = dir('pingpong/*.jpeg');    
for i = 1:(length(files) - 1)
   filename1 = char(strcat(files(i).folder,'/',files(i).name));
   filename2 = char(strcat(files(i+1).folder,'/',files(i+1).name));
   im1 = imread(filename1);
   im2 = imread(filename2);
   [H, r, c] = harris_corner_detection(filename1);
   LK(im1, im2, regionsize, r, c);
end
